{% extends 'base.layout.html.twig' %}

{% block title %}Elisei{% endblock %}

{% block stylesheets %}
{#     <link rel="stylesheet" href="{{ asset('css/event.css') }}"/>#}
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/event.js') }}"></script>
{% endblock %}

{% block body %}
<div class="container">
    <h1>Elisei</h1>
    <hr/>
    <div class="row">
    	<div class="col-xs-12">
    		<label>Indici Il nuovo Eliseo</label>
    	</div>
    </div>
    {% if is_granted('ROLE_ADMIN') %}
    <div class="row">
    	<div class="col-xs-12">
            {{ form_start(form, {attr:{'class':'form-inline'}}) }}
            	<div class="form-group">
                    {{ form_row(form.address, {'attr': {'class':'form-control col-xs-12'}}) }}
                </div>
                <div class="form-group">
                    {{ form_row(form.date, {'attr': {'class': 'form-control'}}) }}
                </div>
            	<div class="form-group">
                    <button type="submit" class="btn btn-default">Crea</button>
                </div>
            {{ form_end(form) }}
        </div>
    </div>
    <hr/>
    {% endif %}
    <div class="row">
    {% for event in events %}
    	<div class="col-sm-6 col-md-4">
            <div class="thumbnail">
              <div class="caption">
                <h3>Eliseo <small>{{ event.date | datediffFromatted }}</small></h3>
                <p>{{ event.address }}</p>
                <p>{{ event.date | strftime }}</p>
                {% if event.proposal | length > 0 %}
                <p><a href="{{ path('event_proposal_view', {'eid':event.id}) }}" data-toggle="modal" data-target="#event_assign">Proposte</a> <span class="badge">{{ event.proposal | length }}</span></p>
                {% else %}
                <p>Proposte <span class="badge">{{ event.proposal | length }}</span></p>
                {% endif %}
                <p>
                	<a href="{{ path('event_proposal', {'eid':event.id}) }}" class="btn btn-primary" role="button">Proponiti</a>
                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_EDILE') %}
                		<a href="{{ path('event_delete', {'eid':event.id}) }}" onclick="if (!confirm('L\'operazione Ã¨ irreversibile\nContinuare?')) return false;" class="btn btn-danger" role="button">Elimina</a>
                	{% endif %}
                </p>
              </div>
            </div>
          </div>
    {% endfor %}
    </div>
</div>

<div id="event_assign" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
    </div>
</div>
{% endblock %}